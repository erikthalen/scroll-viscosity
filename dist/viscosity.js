var viscosity=function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);function s(t){return(t=>Promise.all(t.reduce((t,e)=>(e.complete||t.push(new Promise(t=>{e.onload=t})),t),[])))("IMG"===t.subject.tagName?[t.subject]:[...t.subject.querySelectorAll("img")])}function n(){return"loaded"===document.fonts.status?Promise.resolve(!0):document.fonts.ready}var o={callback(t,e,i,s){t()&&(e(),s.disconnect())},observe({what:t,until:e}){const i={attributes:!0,childList:!0,subtree:!0,until:e};return new Promise((s,n)=>{e()?s():(this.observer=new MutationObserver(this.callback.bind(this,e,s)),this.observer.observe(t,i))})}},a={get:t=>t.dataset.viscosity,set(t,e){t.dataset.viscosity=e}};const r=t=>parseFloat(t),l=(t,e,i)=>(1-i)*t+i*e,c=(t,e)=>window.getComputedStyle(t)[e],p=["position","top","left","width","height","maxWidth","maxHeight","display","transform","marginTop","marginBottom","marginLeft","marginRight","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","padding","borderWidth","float"],d=(t,e)=>{const i=t.getBoundingClientRect();return p.filter(t=>"display"!==t).forEach(i=>e[i]=c(t,i)),e.transform=c(t,"transform").split(/[(,)]+/).filter(Boolean).map(r),e.topPos=i.top+window.pageYOffset-parseFloat(c(t,"marginTop"))+parseFloat(c(t,"paddingTop")),e.leftPos=i.left+parseFloat(c(t,"paddingLeft")),e.widthRect=i.width-parseFloat(c(t,"paddingLeft"))-parseFloat(c(t,"paddingRight")),e.heightRect=i.height-parseFloat(c(t,"paddingTop"))-parseFloat(c(t,"paddingTop")),e.bodyMargin=parseFloat(c(document.body,"marginLeft")),t.dataset.viscosity="is-read",e};const u=(t,e,i=0)=>!(e===document.body&&i<2)&&(i>1||(e.dataset[t]?u(t,e.parentElement,i+1):u(t,e.parentElement,i))),h=t=>c(t,"display").includes("inline"),g=t=>"IMG"===t.tagName,f=t=>{const e=t.firstElementChild;return h(t)||e&&h(e)&&!g(e)};var m={_update(t,e=-1*window.pageYOffset,i=-1*window.pageXOffset){t.isRunning&&(requestAnimationFrame(()=>this._update(t,e,i)),e=l(e,-1*window.pageYOffset,t.easing),i=l(i,-1*window.pageXOffset,t.easing),this._isRelevant(t,e,i)?(this._setStyle(t,e,i),t.inView=!0):t.inView&&(this._setStyle(t,100*window.innerHeight,0),t.inView=!1))},_setStyle(t,e,i){const s=t.originalPlacement.transform||[];s.length>1?t.subject.style.transform=`matrix(${s[1]}, ${s[2]}, ${s[3]}, ${s[4]}, ${s[5]+i}, ${s[6]+e})`:t.subject.style.transform=`translate3d(${i}px, ${e}px, 0)`},start(t){t.isRunning=t.inView=!0,this._update(t)},stop(t){t.isRunning=!1,((t,...e)=>{e.forEach(e=>t.style.removeProperty(e)),t.getAttribute("style")||t.removeAttribute("style")})(t.subject,"transform")},isRunning:t=>t.isRunning,_isRelevant(t,e,i){const{heightRect:s,widthRect:n,topPos:o,leftPos:a}=t.originalPlacement,r=.5*s,l=e+s>=-1*o-r,c=e<=-1*(o-window.innerHeight)+r;return l&&c}};var b={id:0,copycats:[],subscriptions:[],get proxy(){return new Proxy(this.copycats,{set:(t,e,i)=>(t[e]=i,this.id=t.length,"number"!=typeof i||t.length||this.subscriptions.forEach(t=>{setTimeout(t.cb,100)}),!0)})},create(t){var e;t.copycat=document.createElement("div"),this._addRef(t.copycat),t.copycat.innerHTML=String.fromCharCode(160),t.copycat.classList.add("copycat"),t.copycat.dataset.id=t.id=this._setId(t),(e=t.copycat,t=>{t.parentNode.insertBefore(e,t.nextSibling)})(t.subject),this.applyStyles(t)},remove(t){t.copycat.remove(),this._removeRef(t.copycat)},getId:t=>t.id,subscribe(t,e){this.subscriptions.push({viscosity:t,cb:e})},unsubscribe(t){const e=this.subscriptions.map(t=>t.viscosity).indexOf(t);this.subscriptions.splice(e,1)},applyStyles(t){const{position:e,display:i,leftPos:s,topPos:n,bodyMargin:o,paddingLeft:a,borderWidth:r,widthRect:l,heightRect:c,float:p}=t.originalPlacement;Object.assign(t.copycat.style,{width:l+"px",height:c+"px",position:this._ifNot("static")(e),display:!g(t.subject)&&this._ifNot("list-item","block")(i)&&"inline"===i?"inline-block":"",left:this._ifNot("static","relative")(e)&&("absolute"===e?s-o-parseFloat(a)+"px":s+"px"),top:this._ifNot("static","relative")(e)&&this._accounted(t,n)+"px",margin:this._getSpacings(t,"margin"),padding:this._getSpacings(t,"padding"),float:this._ifNot("none")(p)})},_getSpacings(t,e){return`${this._getSpacing(t,`${e}Top`)} ${this._getSpacing(t,`${e}Right`)} ${this._getSpacing(t,`${e}Bottom`)} ${this._getSpacing(t,`${e}Left`)}`},_getSpacing(t,e){return f(t.subject)?parseFloat(t.originalPlacement[e]):Math.max(parseFloat(t.originalPlacement[e]),parseFloat(this._getChildSpacing(t.subject,e)))+"px"},_getChildSpacing(t,e){const i=e.includes("Top")?"firstElementChild":e.includes("Bottom")?"lastElementChild":null;return i&&t[i]&&t[i][i]?this._getChildSpacing(t[i],e):i&&t[i]?parseFloat(c(t[i],e)):parseFloat(c(t,e))},_setId(t){return this.copycats.find(e=>e.element===t.copycat).id},_removeRef(t){const e=this.copycats.map(t=>t.element).indexOf(t);this.proxy.splice(e,1)},_addRef(t){this.proxy.push({element:t,id:this.id})},_accounted:(t,e)=>f(t.subject)?e+t.originalPlacement.bodyMargin:"absolute"===t.originalPlacement.position?parseFloat(t.originalPlacement.top):e+t.originalPlacement.bodyMargin,_ifNot:(...t)=>e=>t.includes(e)?null:e},y={setup(t){const{topPos:e,leftPos:i,marginTop:s,marginLeft:n,paddingTop:o,paddingLeft:a,widthRect:r,heightRect:l}=t.originalPlacement;Object.assign(t.subject.style,{position:"fixed",width:r+"px",height:l+"px",top:e-parseFloat(o)+"px",left:i-parseFloat(n)-parseFloat(a)+"px"})},revert(t){const e=t.originalPlacement.inlineStyle;setTimeout(()=>{e?t.subject.style.cssText=e:t.subject.removeAttribute("style")})}};class v{constructor({element:t,easing:e,wacky:i}){var r,l;this.subject=t,this.easing=i?(r=.1,l=.25,Math.random()*(l-r)+r):e||.3,this.subject&&(o.observe({what:this.subject.parentElement,until:()=>"is-bound"===a.get(this.subject)}).then(function(t){return s(t).then(n)}(this).then(this.init.bind(this))),a.set(this.subject,"is-bound"),function(t){let e=null;window.addEventListener("resize",i=>{clearTimeout(e),e=setTimeout(()=>{t()},250)})}(this.restart.bind(this)))}init(){var t;(t=this.subject,new Promise((e,i)=>{o.observe({what:t,until:()=>"is-seen"===a.get(t)}).then(()=>{if(s)o.observe({what:t,until:()=>"inline-block"===t.style.display}).then(()=>{o.observe({what:t,until:()=>"is-read"===a.get(t)}).then(()=>{o.observe({what:t,until:()=>t.style.cssText===n.inline}).then(()=>{e(i)}),t.style.cssText=n.inline});const i=d(t,n)}),t.style.display="inline-block";else{o.observe({what:t,until:()=>"is-read"===a.get(t)}).then(()=>{e(i)});const i=d(t,n)}});const s=h(t),n={};n.inlineStyle=t.style.cssText,n.display=c(t,"display"),a.set(t,"is-seen")})).then(t=>{this.originalPlacement=t,u("viscosity",this.subject)?a.set(this.subject,"is-child"):(y.setup(this),b.create(this),m.start(this),a.set(this.subject,"is-running"))})}destroy(){y.revert(this),b.remove(this),m.stop(this),a.set(this.subject,"is-destroyed")}restart(){m.isRunning(this)&&(this.destroy(),setTimeout(this.init.bind(this),250))}toggle(){m.isRunning(this)?this.destroy():this.init()}}e.default=function(t){return"string"==typeof t?[...document.querySelectorAll(t)].map(t=>new v({element:t})):t.tagName?new v({element:t}):"object"==typeof t?new v(t):void 0}}]);