var viscosity=function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);function s(t){return(t=>Promise.all(t.reduce((t,e)=>e.complete?t:(t.push(new Promise(t=>{e.onload=t})),t),[])))("IMG"===t.subject.tagName?[t.subject]:[...t.subject.querySelectorAll("img")])}function n(){return"loaded"===document.fonts.status?Promise.resolve(!0):document.fonts.ready}const r=t=>parseFloat(t),o=(...t)=>t.reduce((t,e)=>("auto"===e&&(e=0),t+parseFloat(e)),0),a=(t,e)=>window.getComputedStyle(t)[e],l=["position","top","left","width","height","maxWidth","maxHeight","display","transform","marginTop","marginBottom","marginLeft","marginRight","paddingTop","margin","padding","borderWidth","float"],c=(t,e)=>{const i=t.getBoundingClientRect();return l.filter(t=>"display"!==t).forEach(i=>e[i]=a(t,i)),e.transform=a(t,"transform").split(/[(,)]+/).filter(Boolean).map(r),e.topPos=i.top+window.pageYOffset-parseFloat(a(t,"marginTop"))-parseFloat(a(t,"paddingTop")),e.leftPos=i.left,e.widthRect=i.width,e.heightRect=i.height,e.bodyMargin=parseFloat(a(document.body,"marginLeft")),e};const u=(t,e,i=0)=>!(e===document.body&&i<2)&&(i>1||(e.dataset[t]?u(t,e.parentElement,i+1):u(t,e.parentElement,i))),d=t=>a(t,"display").includes("inline"),h=t=>"IMG"===t.tagName,p=t=>{const e=t.firstElementChild;return d(t)||e&&d(e)&&!h(e)};var g={_update(t,e=-1*window.pageYOffset){var i,s,n;t.isRunning&&(requestAnimationFrame(()=>this._update(t,e)),i=e,s=-1*window.pageYOffset,n=t.easing,e=(1-n)*i+n*s,this._isRelevant(t,e)?(this._setStyle(t,e),t.wereInView=!0):t.wereInView&&(this._setStyle(t,100*window.innerHeight),t.wereInView=!1))},_setStyle(t,e){const i=t.originalPlacement.transform||[];i.length>1?t.subject.style.transform=`matrix(${i[1]}, ${i[2]}, ${i[3]}, ${i[4]}, 0, ${i[6]+e})`:t.subject.style.transform=`translate3d(0, ${e}px, 0)`},start(t){t.isRunning=!0,this._update(t)},stop(t){t.isRunning=!1,((t,...e)=>{e.forEach(e=>t.style.removeProperty(e)),t.getAttribute("style")||t.removeAttribute("style")})(t.subject,"transform")},isRunning:t=>t.isRunning,_isRelevant(t,e){const i=2*t.originalPlacement.heightRect,s=e+t.originalPlacement.heightRect>=-1*t.originalPlacement.topPos-i,n=e<=-1*(t.originalPlacement.topPos-window.innerHeight)+i;return s&&n}};var m={id:0,create(t){var e;t.copycat=document.createElement("div"),t.copycat.innerHTML=String.fromCharCode(160),t.copycat.classList.add("copycat"),t.copycat.dataset.id=t.id=this.id,this.id++,(e=t.copycat,t=>{t.parentNode.insertBefore(e,t.nextSibling)})(t.subject)},remove(t){t.copycat.remove(),this.id=0},getId:t=>t.id,applyStyles(t){const{position:e,display:i,leftPos:s,topPos:n,bodyMargin:r,padding:o,borderWidth:a,widthRect:l,heightRect:c,float:u}=t.originalPlacement;Object.assign(t.copycat.style,{width:l+"px",height:c+"px",position:this._ifNot("static")(e),display:!h(t.subject)&&this._ifNot("list-item","block")(i)&&"inline"===i&&"inline-block",left:this._ifNot("static","relative")(e)&&("absolute"===e?s-r+"px":s+"px"),top:this._ifNot("static","relative")(e)&&this._accounted(t,n)+"px",margin:this._getMargins(t),padding:"0px"!==o&&"0px"!==a&&parseFloat(o)+parseFloat(a)+"px",float:this._ifNot("none")(u)})},_getMargins(t){return`${this._getMargin(t,"Top")} ${this._getMargin(t,"Right")} ${this._getMargin(t,"Bottom")} ${this._getMargin(t,"Left")}`},_getMargin(t,e){return p(t.subject)?parseFloat(t.originalPlacement[`margin${e}`]):Math.max(parseFloat(t.originalPlacement[`margin${e}`]),parseFloat(this._getChildMargin(t.subject,e)))+"px"},_getChildMargin(t,e){const i="Top"===e?"firstElementChild":"Bottom"===e?"lastElementChild":null;if(t)return i?i&&t[i]&&t[i][i]?this._getChildMargin(t[i],e):i&&t[i]?parseFloat(a(t[i],`margin${e}`)):void 0:parseFloat(a(t,`margin${e}`))},_accounted:(t,e)=>p(t.subject)?e+t.originalPlacement.bodyMargin:"absolute"===t.originalPlacement.position?parseFloat(t.originalPlacement.top):e+t.originalPlacement.bodyMargin,_ifNot:(...t)=>e=>t.includes(e)?null:e},f={setup(t){const{topPos:e,paddingTop:i,marginLeft:s,leftPos:n,margin:r,widthRect:a,heightRect:l}=t.originalPlacement;Object.assign(t.subject.style,{position:"fixed",width:a+"px",height:l+"px",top:o(e,i)+"px",left:n-parseFloat(s)+"px",margin:"0px"!==r&&r}),t.subject.firstElementChild&&setTimeout(()=>t.subject.firstElementChild.style.marginTop=0)},revert(t){const e=t.originalPlacement.inlineStyle;setTimeout(()=>{e?t.subject.style.cssText=e:t.subject.removeAttribute("style")}),t.subject.firstElementChild&&t.subject.firstElementChild.style.removeProperty("margin-top")}},b={callback(t,e,i,s){t()&&(e(),s.disconnect())},observe({what:t,assertThat:e}){const i={attributes:!0,childList:!0,subtree:!0,assertThat:e};return new Promise((s,n)=>{e()?s():(this.observer=new MutationObserver(this.callback.bind(this,e,s)),this.observer.observe(t,i))})}};class y{constructor({element:t,easing:e,wacky:i}){var r,o;this.subject=t,this.easing=i?(r=.1,o=.25,Math.random()*(o-r)+r):e||.3,this.subject&&(b.observe({what:this.subject.parentElement,assertThat:()=>"is-bound"===this.subject.dataset.viscosity}).then(()=>{(function(t){return s(t).then(n)})(this).then(this.init.bind(this))}),this.subject.dataset.viscosity="is-bound",function(t){let e=null;window.addEventListener("resize",i=>{clearTimeout(e),e=setTimeout(()=>{t()},250)})}(this.restart.bind(this)))}init(){setTimeout(()=>{var t;(t=this.subject,new Promise((e,i)=>{const s=d(t),n={};if(n.inlineStyle=t.style.cssText,n.display=a(t,"display"),s)t.style.display="inline-block",setTimeout(()=>{const i=c(t,n);t.style.cssText=n.inline,setTimeout(()=>{e(i)})});else{const i=c(t,n);setTimeout(()=>{e(i)})}})).then(t=>{this.originalPlacement=t,setTimeout(()=>{u("viscosity",this.subject)?this.subject.dataset.viscosity="is-child":(f.setup(this),m.create(this),m.applyStyles(this),g.start(this),this.subject.dataset.viscosity="is-running")},100)})},100)}destroy(){f.revert(this),m.remove(this),g.stop(this),this.subject.dataset.viscosity="is-destroyed"}restart(){g.isRunning(this)&&(this.destroy(),b.observe({what:this.subject.parentElement,assertThat:()=>!this.subject.parentElement.querySelector(`[data-id='${m.getId(this)}']`)}).then(this.init.bind(this)))}toggle(){g.isRunning(this)?this.destroy():this.init()}}e.default=function(t){return"string"==typeof t?[...document.querySelectorAll(t)].map(t=>new y({element:t})):t.tagName?new y({element:t}):"object"==typeof t?new y(t):void 0}}]);