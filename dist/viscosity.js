var viscosity=function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);function s(t){return(t=>Promise.all(t.reduce((t,e)=>e.complete?t:(t.push(new Promise(t=>{e.onload=t})),t),[])))("IMG"===t.subject.tagName?[t.subject]:[...t.subject.querySelectorAll("img")])}function n(){return"loaded"===document.fonts.status?Promise.resolve(!0):document.fonts.ready}var r={callback(t,e,i,s){t()&&(e(),s.disconnect())},observe({what:t,until:e}){const i={attributes:!0,childList:!0,subtree:!0,until:e};return new Promise((s,n)=>{e()?s():(this.observer=new MutationObserver(this.callback.bind(this,e,s)),this.observer.observe(t,i))})}},o={get:t=>t.dataset.viscosity,set(t,e){t.dataset.viscosity=e}};const a=t=>parseFloat(t),l=(...t)=>t.reduce((t,e)=>("auto"===e&&(e=0),t+parseFloat(e)),0),c=(t,e)=>window.getComputedStyle(t)[e],u=["position","top","left","width","height","maxWidth","maxHeight","display","transform","marginTop","marginBottom","marginLeft","marginRight","paddingTop","margin","padding","borderWidth","float"],d=(t,e)=>{const i=t.getBoundingClientRect();return u.filter(t=>"display"!==t).forEach(i=>e[i]=c(t,i)),e.transform=c(t,"transform").split(/[(,)]+/).filter(Boolean).map(a),e.topPos=i.top+window.pageYOffset-parseFloat(c(t,"marginTop"))-parseFloat(c(t,"paddingTop")),e.leftPos=i.left,e.widthRect=i.width,e.heightRect=i.height,e.bodyMargin=parseFloat(c(document.body,"marginLeft")),t.dataset.viscosity="is-read",e};const h=(t,e,i=0)=>!(e===document.body&&i<2)&&(i>1||(e.dataset[t]?h(t,e.parentElement,i+1):h(t,e.parentElement,i))),p=t=>c(t,"display").includes("inline"),g=t=>"IMG"===t.tagName,m=t=>{const e=t.firstElementChild;return p(t)||e&&p(e)&&!g(e)};var b={_update(t,e=-1*window.pageYOffset){var i,s,n;t.isRunning&&(requestAnimationFrame(()=>this._update(t,e)),i=e,s=-1*window.pageYOffset,n=t.easing,e=(1-n)*i+n*s,this._isRelevant(t,e)?(this._setStyle(t,e),t.inView=!0):t.inView&&(this._setStyle(t,100*window.innerHeight),t.inView=!1))},_setStyle(t,e){const i=t.originalPlacement.transform||[];i.length>1?t.subject.style.transform=`matrix(${i[1]}, ${i[2]}, ${i[3]}, ${i[4]}, 0, ${i[6]+e})`:t.subject.style.transform=`translate3d(0, ${e}px, 0)`},start(t){t.isRunning=t.inView=!0,this._update(t)},stop(t){t.isRunning=!1,((t,...e)=>{e.forEach(e=>t.style.removeProperty(e)),t.getAttribute("style")||t.removeAttribute("style")})(t.subject,"transform")},isRunning:t=>t.isRunning,_isRelevant(t,e){const i=.5*t.originalPlacement.heightRect,s=e+t.originalPlacement.heightRect>=-1*t.originalPlacement.topPos-i,n=e<=-1*(t.originalPlacement.topPos-window.innerHeight)+i;return s&&n}};var y={id:0,copycats:[],subscriptions:[],get proxy(){return new Proxy(this.copycats,{set:(t,e,i)=>(t[e]=i,this.id=t.length,"number"!=typeof i||t.length||this.subscriptions.forEach(t=>{setTimeout(t.cb,100)}),!0)})},create(t){var e;t.copycat=document.createElement("div"),this._addRef(t.copycat),t.copycat.innerHTML=String.fromCharCode(160),t.copycat.classList.add("copycat"),t.copycat.dataset.id=t.id=this._getId(t),(e=t.copycat,t=>{t.parentNode.insertBefore(e,t.nextSibling)})(t.subject),this.applyStyles(t)},getId:t=>t.id,remove(t){t.copycat.remove(),this._removeRef(t.copycat)},subscribe(t,e){this.subscriptions.push({viscosity:t,cb:e})},unsubscribe(t){const e=this.subscriptions.map(t=>t.viscosity).indexOf(t);this.subscriptions.splice(e,1)},applyStyles(t){const{position:e,display:i,leftPos:s,topPos:n,bodyMargin:r,padding:o,borderWidth:a,widthRect:l,heightRect:c,float:u}=t.originalPlacement;Object.assign(t.copycat.style,{width:l+"px",height:c+"px",position:this._ifNot("static")(e),display:!g(t.subject)&&this._ifNot("list-item","block")(i)&&"inline"===i&&"inline-block",left:this._ifNot("static","relative")(e)&&("absolute"===e?s-r+"px":s+"px"),top:this._ifNot("static","relative")(e)&&this._accounted(t,n)+"px",margin:this._getMargins(t),padding:"0px"!==o&&"0px"!==a&&parseFloat(o)+parseFloat(a)+"px",float:this._ifNot("none")(u)})},_getMargins(t){return`${this._getMargin(t,"Top")} ${this._getMargin(t,"Right")} ${this._getMargin(t,"Bottom")} ${this._getMargin(t,"Left")}`},_getMargin(t,e){return m(t.subject)?parseFloat(t.originalPlacement[`margin${e}`]):Math.max(parseFloat(t.originalPlacement[`margin${e}`]),parseFloat(this._getChildMargin(t.subject,e)))+"px"},_getChildMargin(t,e){const i="Top"===e?"firstElementChild":"Bottom"===e?"lastElementChild":null;return i&&t[i]&&t[i][i]?this._getChildMargin(t[i],e):i&&t[i]?parseFloat(c(t[i],`margin${e}`)):parseFloat(c(t,`margin${e}`))},_getId(t){return this.copycats.find(e=>e.element===t.copycat).id},_removeRef(t){const e=this.copycats.map(t=>t.element).indexOf(t);this.proxy.splice(e,1)},_addRef(t){this.proxy.push({element:t,id:this.id})},_accounted:(t,e)=>m(t.subject)?e+t.originalPlacement.bodyMargin:"absolute"===t.originalPlacement.position?parseFloat(t.originalPlacement.top):e+t.originalPlacement.bodyMargin,_ifNot:(...t)=>e=>t.includes(e)?null:e},f={setup(t){const{topPos:e,paddingTop:i,marginLeft:s,leftPos:n,margin:r,widthRect:o,heightRect:a}=t.originalPlacement;Object.assign(t.subject.style,{position:"fixed",width:o+"px",height:a+"px",top:l(e,i)+"px",left:n-parseFloat(s)+"px"}),t.subject.firstElementChild&&setTimeout(()=>t.subject.firstElementChild.style.marginTop=0)},revert(t){const e=t.originalPlacement.inlineStyle;setTimeout(()=>{e?t.subject.style.cssText=e:t.subject.removeAttribute("style")}),t.subject.firstElementChild&&t.subject.firstElementChild.style.removeProperty("margin-top")}};class v{constructor({element:t,easing:e,wacky:i}){var a,l;this.subject=t,this.easing=i?(a=.1,l=.25,Math.random()*(l-a)+a):e||.3,this.subject&&(r.observe({what:this.subject.parentElement,until:()=>"is-bound"===o.get(this.subject)}).then(function(t){return s(t).then(n)}(this).then(this.init.bind(this))),o.set(this.subject,"is-bound"),function(t){let e=null;window.addEventListener("resize",i=>{clearTimeout(e),e=setTimeout(()=>{t()},250)})}(this.restart.bind(this)))}init(){var t;(t=this.subject,new Promise((e,i)=>{r.observe({what:t,until:()=>"is-seen"===o.get(t)}).then(()=>{if(s)r.observe({what:t,until:()=>"inline-block"===t.style.display}).then(()=>{r.observe({what:t,until:()=>"is-read"===o.get(t)}).then(()=>{r.observe({what:t,until:()=>t.style.cssText===n.inline}).then(()=>{e(i)}),t.style.cssText=n.inline});const i=d(t,n)}),t.style.display="inline-block";else{r.observe({what:t,until:()=>"is-read"===o.get(t)}).then(()=>{e(i)});const i=d(t,n)}});const s=p(t),n={};n.inlineStyle=t.style.cssText,n.display=c(t,"display"),o.set(t,"is-seen")})).then(t=>{this.originalPlacement=t,h("viscosity",this.subject)?o.set(this.subject,"is-child"):(f.setup(this),y.create(this),b.start(this),o.set(this.subject,"is-running"))})}destroy(){f.revert(this),y.remove(this),b.stop(this),o.set(this.subject,"is-destroyed")}restart(){b.isRunning(this)&&(y.subscribe(this,()=>{r.observe({what:this.subject.parentElement,until:()=>!this.subject.parentElement.querySelector(`[data-id='${y.getId(this)}']`)}).then(()=>{y.unsubscribe(this),this.init()})}),this.destroy())}toggle(){b.isRunning(this)?this.destroy():this.init()}}e.default=function(t){return"string"==typeof t?[...document.querySelectorAll(t)].map(t=>new v({element:t})):t.tagName?new v({element:t}):"object"==typeof t?new v(t):void 0}}]);