var viscosity=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);function n(t){return(t=>Promise.all(t.reduce((t,e)=>e.complete?t:(t.push(new Promise(t=>{e.onload=t})),t),[])))("IMG"===t.subject.tagName?[t.subject]:[...t.subject.querySelectorAll("img")])}function s(){return"loaded"===document.fonts.status?Promise.resolve(!0):document.fonts.ready}const o=t=>parseFloat(t),r=(...t)=>t.reduce((t,e)=>("auto"===e&&(e=0),t+parseFloat(e)),0),a=(t,e)=>window.getComputedStyle(t)[e],l=["position","top","left","width","height","maxWidth","maxHeight","display","transform","marginTop","marginBottom","marginLeft","marginRight","paddingTop","margin","padding","borderWidth","float"],c=(t,e)=>{const i=t.getBoundingClientRect();return l.filter(t=>"display"!==t).forEach(i=>e[i]=a(t,i)),e.transform=a(t,"transform").split(/[(,)]+/).filter(Boolean).map(o),e.topPos=i.top+window.pageYOffset-parseFloat(a(t,"marginTop"))-parseFloat(a(t,"paddingTop")),e.leftPos=i.left,e.widthPos=i.width,e.heightPos=i.height,e.bodyMargin=parseFloat(a(document.body,"marginLeft")),e};const u=(t,e,i=0)=>!(e===document.body&&i<2)&&(i>1||(e.dataset[t]?u(t,e.parentElement,i+1):u(t,e.parentElement,i))),d=t=>a(t,"display").includes("inline"),p=t=>"IMG"===t.tagName,m=t=>{const e=t.firstElementChild;return d(t)||e&&d(e)&&!p(e)},g=t=>{let e=0;const i=(t,n)=>e>100?(console.warn(`tried ${e} times, but couldn't resolve ${t}`),"fail"):t()?void requestAnimationFrame(n):requestAnimationFrame(()=>{e++,i(t,n)});return new Promise(e=>{requestAnimationFrame(()=>i(t,e))})};var h={_update(t,e=-1*window.pageYOffset){var i,n,s;t.isRunning&&(requestAnimationFrame(()=>this._update(t,e)),i=e,n=-1*window.pageYOffset,s=t.easing,e=(1-s)*i+s*n,this._setStyle(t,e))},_setStyle(t,e){const i=t.originalPlacement.transform||[];i.length>1?t.subject.style.transform=`matrix(${i[1]}, ${i[2]}, ${i[3]}, ${i[4]}, 0, ${i[6]+e})`:t.subject.style.transform=`translate3d(0, ${e}px, 0)`},start(t){t.isRunning=!0,this._update(t)},stop(t){t.isRunning=!1,((t,...e)=>{e.forEach(e=>t.style.removeProperty(e)),t.getAttribute("style")||t.removeAttribute("style")})(t.subject,"transform")}};var f={create(t){var e;t.copycat=document.createElement("div"),t.copycat.innerHTML=String.fromCharCode(160),t.copycat.classList.add("copycat"),(e=t.copycat,t=>{t.parentNode.insertBefore(e,t.nextSibling)})(t.subject)},remove(t){t.copycat.remove()},applyStyles(t){const{position:e,display:i,leftPos:n,topPos:s,bodyMargin:o,padding:r,borderWidth:a,widthPos:l,heightPos:c,float:u}=t.originalPlacement;Object.assign(t.copycat.style,{width:l+"px",height:c+"px",position:this._ifNot("static")(e),display:!p(t.subject)&&this._ifNot("list-item","block")(i)&&"inline"===i&&"inline-block",left:this._ifNot("static","relative")(e)&&("absolute"===e?n-o+"px":n+"px"),top:this._ifNot("static","relative")(e)&&this._accounted(t,s)+"px",margin:this._getMargins(t),padding:"0px"!==r&&"0px"!==a&&parseFloat(r)+parseFloat(a)+"px",float:this._ifNot("none")(u)})},_getMargins(t){return`${this._getMargin(t,"Top")} ${this._getMargin(t,"Right")} ${this._getMargin(t,"Bottom")} ${this._getMargin(t,"Left")}`},_getMargin(t,e){return m(t.subject)?parseFloat(t.originalPlacement[`margin${e}`]):Math.max(parseFloat(t.originalPlacement[`margin${e}`]),parseFloat(this._getChildMargin(t.subject,e)))+"px"},_getChildMargin(t,e){const i="Top"===e?"firstElementChild":"Bottom"===e?"lastElementChild":null;if(t)return i?i&&t[i]&&t[i][i]?this._getChildMargin(t[i],e):i&&t[i]?parseFloat(a(t[i],`margin${e}`)):void 0:parseFloat(a(t,`margin${e}`))},_accounted:(t,e)=>m(t.subject)?e+t.originalPlacement.bodyMargin:"absolute"===t.originalPlacement.position?parseFloat(t.originalPlacement.top):e+t.originalPlacement.bodyMargin,_ifNot:(...t)=>e=>t.includes(e)?null:e},y={setup(t){const{topPos:e,paddingTop:i,marginLeft:n,leftPos:s,margin:o,widthPos:a,heightPos:l}=t.originalPlacement;Object.assign(t.subject.style,{position:"fixed",width:a+"px",height:l+"px",top:r(e,i)+"px",left:s-parseFloat(n)+"px",margin:"0px"!==o&&o}),t.subject.firstElementChild&&setTimeout(()=>t.subject.firstElementChild.style.marginTop=0)},revert(t){setTimeout(()=>t.subject.style.cssText=t.originalPlacement.inlineStyle),t.subject.firstElementChild&&t.subject.firstElementChild.style.removeProperty("margin-top")}};class b{constructor({element:t,easing:e,wacky:i}){var o,r;this.subject=t,this.easing=i?(o=.1,r=.25,Math.random()*(r-o)+o):e||.3,this.subject?(this.subject.dataset.viscosity="is-bound",g(()=>"is-bound"===this.subject.dataset.viscosity).then(()=>{(function(t){return n(t).then(s)})(this).then(this.init.bind(this))}),function(t){let e=null;window.addEventListener("resize",i=>{clearTimeout(e),e=setTimeout(()=>{t()},250)})}(this.restart.bind(this))):console.log("No subject! Cancelling")}init(){setTimeout(()=>{var t;(t=this.subject,new Promise((e,i)=>{const n=d(t),s={};if(s.inlineStyle=t.style.cssText,s.display=a(t,"display"),n)t.style.display="inline-block",setTimeout(()=>{const i=c(t,s);t.style.cssText=s.inline,setTimeout(()=>{e(i)})});else{const i=c(t,s);setTimeout(()=>{e(i)})}})).then(t=>{this.originalPlacement=t,this.originalPlacement||console.log("Didn't get any style refs, just got: ",this.originalPlacement),setTimeout(()=>{u("viscosity",this.subject)?this.subject.dataset.viscosity="is-child":(y.setup(this),f.create(this),f.applyStyles(this),h.start(this),this.subject.dataset.viscosity="is-running")},100)},100)})}destroy(){y.revert(this),f.remove(this),h.stop(this),this.subject.dataset.viscosity="is-destroyed",setTimeout(()=>{this.originalPlacement=void 0},10)}restart(){this.isRunning&&(this.destroy(),g(()=>void 0===this.originalPlacement).then(this.init.bind(this)))}toggle(){this.isRunning?this.destroy():this.init()}}e.default=function(t){return"string"==typeof t?[...document.querySelectorAll(t)].map(t=>new b({element:t})):t.tagName?new b({element:t}):"object"==typeof t?new b(t):void 0}}]);